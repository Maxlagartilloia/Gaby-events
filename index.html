<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gaby GarzÃ³n Events | App Builder</title>

<script src="https://cdn.tailwindcss.com"></script>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<style>
body { font-family: 'Poppins', sans-serif; transition: .3s; }
.title-font { font-family: 'Playfair Display', serif; }
.gold { color: #d4a055; }
.bg-gold { background-color: #d4a055; }
.page { display: none; }
.page.active { display: block; animation: fade .4s ease; }
@keyframes fade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
.nav-icon { width: 24px; opacity: 0.8; }
.nav-item.active .nav-icon { opacity: 1; }
.card:hover { transform: scale(1.02); transition: 0.2s; }
#modalAgregar { backdrop-filter: blur(3px); }

/* Dark mode */
.dark { background-color: #121212; color: #eee; }
.dark .card { background: #1d1d1d; }
.dark header { background: #2a2a2a; }
.dark .bg-white { background: #1d1d1d; }

/* GalerÃ­a estilo Instagram */
#modalImgPreview {
  backdrop-filter: blur(4px);
  animation: fade .3s ease;
}
</style>
</head>

<body class="bg-white">

<!-- BOTÃ“N DARK MODE -->
<button id="darkToggle"
   class="fixed top-4 right-4 w-12 h-12 flex items-center justify-center rounded-full shadow bg-gray-200 z-50 text-xl">
   ğŸŒ™
</button>

<!-- WHATSAPP FLOAT -->
<a href="https://wa.me/593992004343?text=Hola%20Gaby%20Garzon%20Events%2C%20quiero%20informaciÃ³n"
   class="fixed bottom-20 right-4 bg-green-500 text-white w-14 h-14 flex items-center justify-center rounded-full shadow-xl z-50">
    <img src="https://i.postimg.cc/HLKGZrwv/whatsapp.png" width="28">
</a>

<!-- HEADER -->
<header class="bg-pink-100 text-center py-6 shadow">
    <h1 class="title-font text-3xl gold">Gaby GarzÃ³n Events</h1>
    <p class="text-gray-600 text-sm px-4">Arma tu evento como si fuera una App ğŸ€</p>
</header>

<!-- BUSCADOR -->
<div class="px-4 py-3">
    <input id="searchInput" type="text" placeholder="Buscar paquetes o piezas..."
        class="w-full border p-3 rounded-lg shadow">
</div>

<!-- FILTROS -->
<div class="flex gap-3 px-4 overflow-x-auto py-3">
    <button class="filterBtn bg-gold text-white px-4 py-2 rounded-lg" data-cat="all">Todo</button>
    <button class="filterBtn border border-gold px-4 py-2 rounded-lg" data-cat="Tematicas Infantiles">Infantiles</button>
    <button class="filterBtn border border-gold px-4 py-2 rounded-lg" data-cat="Tematicas Elegantes">Elegantes</button>
    <button class="filterBtn border border-gold px-4 py-2 rounded-lg" data-cat="Paquetes Premium">Premium</button>
    <button class="filterBtn border border-gold px-4 py-2 rounded-lg" data-cat="Decoracion Completa">Completas</button>
    <button class="filterBtn border border-gold px-4 py-2 rounded-lg" data-cat="Decoracion Parcial">Parcial</button>
    <button class="filterBtn border border-gold px-4 py-2 rounded-lg" data-cat="Alquiler">Alquiler</button>
    <button class="filterBtn border border-gold px-4 py-2 rounded-lg" data-cat="Globos">Globos</button>
    <button class="filterBtn border border-gold px-4 py-2 rounded-lg" data-cat="Backings">Backings</button>
    <button class="filterBtn border border-gold px-4 py-2 rounded-lg" data-cat="Extras">Extras</button>
</div>

<!-- PÃGINAS -->
<div id="home" class="page active px-4 py-6">
    <h2 class="text-2xl gold title-font mb-4">Bienvenida âœ¨</h2>
    <p class="text-gray-700 mb-6 dark:text-gray-300">Arma tu evento, elige piezas o paquetes y mira el costo en vivo.</p>
    <img src="cloud-gold.jpg" class="rounded-xl shadow mb-6 imgOpen" onclick="openImg('cloud-gold.jpg')">
    <button onclick="openPage('paquetes')" class="bg-gold text-white w-full py-3 rounded-lg text-lg shadow">Empezar ğŸ‰</button>
</div>

<!-- PAQUETES -->
<div id="paquetes" class="page px-4 py-6"><h2 class="text-2xl title-font gold mb-6">Paquetes ğŸ</h2><div id="paquetesContainer" class="grid gap-6"></div></div>

<!-- PIEZAS -->
<div id="piezas" class="page px-4 py-6"><h2 class="text-2xl title-font gold mb-6">Piezas ğŸ§©</h2><div id="piezasContainer" class="grid gap-6"></div></div>

<!-- TOTAL -->
<div id="totalPage" class="page px-4 py-6">
    <h2 class="text-2xl title-font gold mb-4">Resumen ğŸ’°</h2>
    <div id="itemsList" class="space-y-3 mb-6"></div>
    <h3 class="title-font text-3xl gold mb-4">Total: <span id="total" class="font-bold">$0</span></h3>
    <button onclick="openPage('enviar')" class="bg-gold text-white w-full py-3 rounded-lg shadow text-lg">Continuar âœ</button>
</div>

<!-- ENVIAR -->
<div id="enviar" class="page px-4 py-6">
    <h2 class="text-2xl title-font gold mb-4">Enviar CotizaciÃ³n ğŸ“©</h2>

    <form name="cotizacion" method="POST" data-netlify="true" action="/gracias.html"
        class="bg-white dark:bg-[#1d1d1d] shadow p-5 rounded-xl space-y-5">

        <input type="hidden" name="form-name" value="cotizacion">
        <input type="hidden" name="items" id="itemsField">
        <input type="hidden" name="total" id="totalField">

        <input type="text" name="nombre" required placeholder="Nombre" class="w-full border p-3 rounded-lg">
        <input type="text" name="whatsapp" required placeholder="WhatsApp" class="w-full border p-3 rounded-lg">
        <input type="date" name="fecha" required class="w-full border p-3 rounded-lg">
        <input type="text" name="ubicacion" placeholder="UbicaciÃ³n" class="w-full border p-3 rounded-lg">

        <button class="bg-gold text-white w-full py-3 rounded-lg shadow text-lg">Enviar Solicitud</button>
    </form>

    <button onclick="sendWhatsApp()" class="bg-green-500 text-white mt-4 w-full py-3 rounded-lg text-lg shadow-lg">
        Enviar por WhatsApp ğŸ“²
    </button>
</div>

<!-- NAVEGACIÃ“N INFERIOR -->
<nav class="fixed bottom-0 left-0 right-0 bg-white dark:bg-[#1d1d1d] shadow-lg py-2 flex justify-around border-t dark:border-gray-700">
    <div class="nav-item active" onclick="openPage('home')"><img class="nav-icon" src="https://img.icons8.com/ios-filled/50/home.png"></div>
    <div class="nav-item" onclick="openPage('paquetes')"><img class="nav-icon" src="https://img.icons8.com/ios-filled/50/gift.png"></div>
    <div class="nav-item" onclick="openPage('piezas')"><img class="nav-icon" src="https://img.icons8.com/ios-filled/50/puzzle.png"></div>
    <div class="nav-item" onclick="openPage('totalPage')"><img class="nav-icon" src="https://img.icons8.com/ios-filled/50/money.png"></div>
    <div class="nav-item" onclick="openPage('enviar')"><img class="nav-icon" src="https://img.icons8.com/ios-filled/50/paper-plane.png"></div>
</nav>

<!-- MODAL CONFIRMACIÃ“N -->
<div id="modalAgregar" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-50">
    <div class="bg-white dark:bg-[#1d1d1d] p-6 rounded-xl shadow-xl w-80">
        <h3 class="text-xl font-semibold gold mb-4">Confirmar</h3>
        <p id="modalTexto" class="text-gray-700 dark:text-gray-300 mb-6"></p>

        <div class="flex justify-between">
            <button onclick="confirmarAgregar()" class="bg-gold text-white px-6 py-2 rounded-lg shadow">SÃ­, agregar</button>
            <button onclick="cancelarAgregar()" class="bg-gray-300 dark:bg-gray-600 px-6 py-2 rounded-lg">
                Cancelar
            </button>
        </div>
    </div>
</div>

<!-- MODAL GALERÃA -->
<div id="modalImgPreview" class="fixed inset-0 bg-black/80 hidden items-center justify-center z-50">
    <img id="modalImg" class="max-w-full max-h-full rounded-lg shadow-xl">
    <button onclick="closeImg()" class="absolute top-6 right-6 text-white text-3xl">âœ–</button>
</div>

<script>
let items = [];
let total = 0;
let itemPendiente = null;
let currentCategory = "all";

// Cambiar pÃ¡gina
function openPage(id) {
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
    document.getElementById(id).classList.add("active");

    document.querySelectorAll(".nav-item").forEach(i => i.classList.remove("active"));
    event.target.closest(".nav-item").classList.add("active");

    updateSummary();
}

// Cargar JSON
let DATA = null;
fetch("data.json")
    .then(r => r.json())
    .then(d => {
        DATA = d;
        renderItems();
    });

function renderItems() {
    const paquetes = DATA.paquetes;
    const piezas = DATA.piezas;

    const contPq = document.getElementById("paquetesContainer");
    const contPz = document.getElementById("piezasContainer");

    contPq.innerHTML = "";
    contPz.innerHTML = "";

    paquetes.forEach(p => contPq.innerHTML += cardHTML(p));
    piezas.forEach(p => contPz.innerHTML += cardHTML(p));

    document.querySelectorAll(".imgOpen").forEach(img =>
        img.addEventListener("click", () => openImg(img.src))
    );

    filtrar();
}

// Tarjeta
function cardHTML(obj) {
    return `
        <div class="card bg-white dark:bg-[#1d1d1d] rounded-xl shadow p-4" data-cat="${obj.categoria}" data-name="${obj.nombre}">
            <img src="${obj.foto}" class="rounded-lg mb-3 imgOpen" onclick="openImg('${obj.foto}')">
            <h3 class="title-font text-xl gold mb-1">${obj.nombre}</h3>
            <p class="text-gray-800 dark:text-gray-300 font-bold mb-3">$${obj.precio}</p>
            <button onclick='addItem(${JSON.stringify(obj)})'
                class="bg-gold text-white w-full py-2 rounded-lg">Agregar</button>
        </div>`;
}

// Modal agregar
function addItem(obj) {
    itemPendiente = obj;
    document.getElementById("modalTexto").innerText = `Â¿Agregar "${obj.nombre}"?`;
    document.getElementById("modalAgregar").classList.remove("hidden");
    document.getElementById("modalAgregar").classList.add("flex");
}

function confirmarAgregar() {
    items.push(itemPendiente);
    itemPendiente = null;
    updateSummary();
    cancelarAgregar();
}

function cancelarAgregar() {
    document.getElementById("modalAgregar").classList.add("hidden");
}

// Eliminar item
function eliminarItem(index) {
    items.splice(index, 1);
    updateSummary();
}

// Actualizar resumen
function updateSummary() {
    const list = document.getElementById("itemsList");
    const t = document.getElementById("total");

    list.innerHTML = "";
    total = 0;

    items.forEach((i, index) => {
        list.innerHTML += `
        <div class="border dark:border-gray-600 p-3 rounded-lg flex justify-between items-center">
            <div><p class="font-semibold gold">${i.nombre}</p><p class="text-gray-700 dark:text-gray-300">$${i.precio}</p></div>
            <button onclick="eliminarItem(${index})" class="text-red-500 text-xl font-bold">âœ–</button>
        </div>`;
        total += Number(i.precio);
    });

    t.innerText = "$" + total;
    document.getElementById("itemsField").value = JSON.stringify(items);
    document.getElementById("totalField").value = total;
}

// WhatsApp
function sendWhatsApp() {
    let msg = "Hola, estas son mis selecciones:%0A%0A";
    items.forEach(i => {
        msg += `â€¢ ${i.nombre} â€“ $${i.precio}%0AFoto: ${window.location.origin}/${i.foto}%0A%0A`;
    });
    msg += `TOTAL: $${total}%0A`;

    window.open("https://wa.me/593992004343?text=" + msg, "_blank");
}

// Filtros
document.querySelectorAll(".filterBtn").forEach(btn => {
    btn.onclick = () => {
        document.querySelectorAll(".filterBtn").forEach(b => b.classList.remove("bg-gold", "text-white"));
        btn.classList.add("bg-gold", "text-white");
        currentCategory = btn.dataset.cat;
        filtrar();
    };
});

// Filtrar + bÃºsqueda
document.getElementById("searchInput").addEventListener("input", filtrar);

function filtrar() {
    const term = document.getElementById("searchInput").value.toLowerCase();

    document.querySelectorAll(".card").forEach(card => {
        const name = card.dataset.name.toLowerCase();
        const cat = card.dataset.cat;

        const matchCategory = currentCategory === "all" || cat === currentCategory;
        const matchSearch = name.includes(term);

        if (matchCategory && matchSearch) card.style.display = "block";
        else card.style.display = "none";
    });
}

// GalerÃ­a estilo Instagram
function openImg(src) {
    document.getElementById("modalImgPreview").classList.add("flex");
    document.getElementById("modalImgPreview").classList.remove("hidden");
    document.getElementById("modalImg").src = src;
}

function closeImg() {
    document.getElementById("modalImgPreview").classList.remove("flex");
    document.getElementById("modalImgPreview").classList.add("hidden");
}

// MODO OSCURO MANUAL
const toggle = document.getElementById("darkToggle");

toggle.addEventListener("click", () => {
    document.body.classList.toggle("dark");
    toggle.innerText = document.body.classList.contains("dark") ? "â˜€ï¸" : "ğŸŒ™";
});
</script>

</body>
</html>
